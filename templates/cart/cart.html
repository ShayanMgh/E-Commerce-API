{% extends "base.html" %}
{% block title %}Cart{% endblock %}
{% block content %}
<h1>Your Cart</h1>

{% if items %}
  <table border="1" cellpadding="6" cellspacing="0">
    <tr>
      <th>Title</th>
      <th>Unit Price</th>
      <th>Qty</th>
      <th>Line Total</th>
      <th></th>
    </tr>
    {% for it in items %}
      <tr>
        <td>{{ it.product.title }}</td>
        <td>{{ it.unit_price }}</td>
        <td>{{ it.qty }}</td>
        <td>{{ it.unit_price|floatformat:2|add:""|floatformat:2|default:it.unit_price }} Ã— {{ it.qty }} = {{ it.unit_price|floatformat:2 }} * {{ it.qty }}</td>
        <td>
          <form method="post" action="{% url 'front-remove-from-cart' item_id=it.id %}">
            {% csrf_token %}
            <button type="submit">Remove</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </table>
  <p><strong>Subtotal:</strong> {{ subtotal }}</p>
  <p>
    <!-- For now, finish checkout via your existing flow on /checkout/ -->
    <a href="/checkout/">Go to Checkout</a>
  </p>
{% else %}
  <p>Your cart is empty.</p>
{% endif %}
{% endblock %}
